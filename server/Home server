#생활코딩 WEB2 - Home server 완강

1. 수업소개

IP Address > 컴퓨터의 전화번호st
IPv4 > 인터넷 통신규칙 (42억개 정도) 그러나 42억개가 부족해짐
IPv6 > 새로운 주소방식 (엄청많음)

공유기 > 하나의 IP주소로 여러대의 컴퓨터를 공같이 사용함. (IP절약)


2. 공유기 (라우터)

IP Address는 다른 컴퓨터와 통신을 하기위한 주소이다.
서버와 클라이언트 컴퓨터가 통신할때 서로의 IP주소가 있어야 통신이 가능함.(주고받는 주소가 있어야하니까)
공유기를 계약해서 받게되면 공유기 기계에 WAN과 LAN선이 있음.
WAN(Wide Area Network)은 계약한 통신사에서 받은 주소. 즉 인터넷이라는 광역 네트워크에 접속하는것 = Public IP
LAN(Local Area Network)은 공유기를 사용하는 기계의 주소(공유기를 통해 각각의 ip가 부여)
공유기는 이 WAN과 LAN사이의 중계원 역할을 하는것. 그리고 공유기에도 ip가 부여된다.
LAN, 즉 사설IP로 쓰기로약속된 IP들이 따로 있음. 192.168.0.0 ~ 192.168.255.255

ex ) 공유기의 WAN IP : 59.6.66.238 / 공유기 IP : 192.168.0.1 / LAN IP : 192.168.0.2 ~ ..


3. NAT (Network Address Translation)

인터넷 <--wan-- 공유기 <--lan-- 사설IP
사설IP가 인터넷접속을 위해 요청하면?
1. 사설 IP주소를 기록해놓는다 (나중에 응답하기위해)
2. NAT기술로 요청한 데이터를 변경한다. (사설IP를 PUBLIC IP(59..)로 바꿔줌.그리고 WAN으로 목적서버에 쏴줌)


4. IP주소 알아내기

제어판 > 네트워크&인터넷 > Network and sharingcenter
IPv4 Address : 사설 IP
IPv4 Default Gateway : 라우터 IP
그리고 라우터주소를 통해 공유기관리페이지에 접속해서 여러가지 셋팅이 가능함.
외부 IP 주소 : WAN인터넷에 접속할때 쓰는 IP
내부 IP 주소 : Gateway IP


5. port

port란 ? 항구. 하나의 컴퓨터에 여러개의 서버가 있을 수 있다. 웹 챗팅 미디어 등등
수많은 서버들을 식별하기 위해 port가 존재함.
서버 = 배 / 포트번호 = 배 주차번호
0-1023 까지는 well-known port , 즉 예약된 포트번호.
ex) 22번포트 SSH / 80포트 HTTP
그렇기에 웹서버를 깔면 기본적으로 80번으로 연결하는것 (listening)
서버는 기본적으로 듣고있다가 요청이 오면 응답하는것이기에 리스닝이라고 씀.

그렇기에 http://naver.com 을 치면 http를 보고 80번 포트에 연결시켜주는것.(80은 생략)
http://example.com:8080 은 8080포트로 접속한다는뜻.

6. port forwarding

ex) 192.168.0.4에 서버를 만듬. 이때 접속하는 사용자들에게 알려줄 IP주소는 public IP
공인아이피주소로 접속해도 로컬아이피 주소로 연결시켜주는 기능을 port forwarding이라고함.

59.6.66.238:8081 ---port forwarding---> 192.168.0.4:80

이 관리는 라우터 관리페이지에서 가능함.
ex) 포트포워드 설정
    규칙이름 : web server1
    내부 IP 주소 : 192.168.0.4
    프로토콜 TCP : 외부포트 80801 | 내부포트 80
    

7. Dynamic IP Address VS Static IP Address

인류가 부족한 IP주소를 효율적으로 사용하기 위한 다이나믹 아이피 주소
ISP(통신사)는 각 계약한 집에 IP주소를 주는데 그 IP주소가 동적으로 바뀐다. (회수하고 .. 돌려막기하는)
통신사마다 사정이 달라서 어떻게될지 정해진건 없는데 공유기를 오래 안쓰면 내 아이피주소가 바뀔수있다는것
독점 IP주소를 사용할수도있는데 이럴경우엔 통신사에 돈주고 서비스를 제공받으면된다


8. DHCP (Dynamic Host Configuration Protocol)

각 서버 아이피들을 자동으로 설정시켜주는 서비스.
(DNS서버나 서브넷 등등 IP를 자동적으로 설정, 보통 공유기에 내장되어있음)

DHCP 서버 ( 보통 공유기에 내장되있음 )
DHCP 클라이언트 ( 보통 컴퓨터 등 통신장치에 자동적으로 내장되있음)

그리고 각 장비별로 식별자 주소가있는데 (피지컬 어드레스) DHCP서버는 어떤 장비가 IP를 빌려갔는지 기억하고있다.

그러나 수동으로 설정할수도 있음.
네트워크 공유센터 > 커넥션 > 속성 > TCP/IPv4 > 속성 > General > use the following IP Address...

* 실습

라우터관리페이지 > 내부 네트워크 설정 > DHCP 서버 동작

동적 IP 주소범위
IP 대여시간 : IP를 무한정 주는게 아님 . 연결된 컴퓨터가 많으면 시간을 짧게, 적으면 길게 주는것도 좋은방법
사용중인 IP 주소정보 : 각 기계의 피지컬어드레스




